---
import MainLayout from "../layouts/MainLayout.astro";
import MainLayout2 from "../layouts/MainLayoutBlog.astro";
const gqlq = {
	query: `{
		posts {
    nodes {
      slug
      title
	  excerpt
      featuredImage {
        node {
          sourceUrl
        }
      }
    }
  }
		}`,
};

const response = await fetch("https://cvking.brooklynwebdesign.nl/graphql", {
	method: "POST",
	headers: {
		"Content-Type": "application/json",
	},
	body: JSON.stringify(gqlq),
});

const posts = await response.json();
---

<!-- <script>
	const gqlq = {
		query: `{
		posts {
    nodes {
      slug
	  excerpt
      title
      featuredImage {
        node {
          sourceUrl
        }
      }
    }
  }
		}`,
	};

	const response = await fetch(
		"https://cvking.brooklynwebdesign.nl/graphql",
		{
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify(gqlq),
		}
	);

	const posts = await response.json();
	console.log(posts)
</script> -->

<MainLayout2 title="test">
	<section id="hero">
		<img src="/0x0.png" transition:name="image-e" alt="">
		<h1>BLOG</h1>
	</section>
	<section id="blog">
		<ul>
			{
				posts.data.posts.nodes.map((post) => (
					<a href={post.slug}>
						<li>
							<div class="img-container">
								{
									<img
										src={
											post
												.featuredImage
												.node
												.sourceUrl
										}
										alt=""
									/>
								}
							</div>
							<p><b>{post.title}</b></p>
							<p>{post.excerpt}</p>
						</li>
					</a>
				))
			}
		</ul>
	</section>
</MainLayout2>

<style>
	#hero{
		text-align: center;
	}
	#hero img{
		width: 400px;
	}
	ul {
		max-width: 1100px;
		margin: 50px auto 100px;
		display: flex;

		gap: 20px;
	}
	li {
		display: flex;
		border-radius: 20px;
		flex-direction: column;
		margin-bottom: 20px;
		max-width: 353px;
		box-shadow: 3px 0px 12px 2px rgba(0, 0, 0, 0.23);
		background-color: #fff;
		overflow: hidden;
	}

	li p{
		padding: 24px;
	}
	.img-container {
		width: 100%;
		height: 266px;
	}
	img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	a{
		text-decoration: none;
		color: ;
	}
</style>

<!-- <script>
	const gqlq = {
		query: `{
            posts {
            nodes {
            featuredImage {
                node {
                    sourceUrl
                }
            }
            title
            slug
            }
           }
        }
            `,
	};

	const response = await fetch(
		"https://skyhighrecruitment.com/graphql?limit=2",
		{
			method: "POST",
			headers: {
				"Content-Type": "application/json",
			},
			body: JSON.stringify(gqlq),
		}
	);

	const posts = await response.json();
	console.log(posts.data.posts.nodes);
</script> -->
